<!DOCTYPE html>
<html>
  <head>
    <title>Bandinchina</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

	<style type="text/css">
		#main {
			padding: 1rem;
    	max-width: 100%;
		}

		#whitelist-nav {
			margin-right: 4px;
		}

		#current-page {
			position: absolute;
			left: -100px;
			top: -100px;
			height: 1px;
			width: 1px;
		}

		img {
			max-width: 100%;
		}

		.container-fluid {
			max-width: 1300px;
		}

		header, footer {
			width: 100%;
		}

		.table td {
			vertical-align: middle;
		}

		.table th,
		.table td:first-child {
			font-weight: bold;
		}

		.table td:nth-child(2),
		.table td:nth-child(3) {
			white-space: nowrap;
		}

		.table td:nth-child(4) {
			text-align: left;
		}
    </style>
  </head>
  <body>
		<div id="current-page">Home</div>
    <div class="container-fluid p-3">
		<div class="row">
			<header class="text-center">
				<a class="btn btn-outline-dark" href="https://github.com/caffeine-overload/bandinchina" target="_blank">GitHub</a>
				<a class="btn btn-outline-dark" href="/">Home</a>
				<button class="btn btn-outline-dark" id="whitelist-nav">Whitelist</a>
				<button class="btn btn-outline-dark" id="blacklist-nav">Blacklist</a>
			</header>
	
			<!-- HK Flag -->
			<svg class="img-fluid d-block mx-auto py-4" style="width: 100% \9" version="1.0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="450" height="300" viewBox="0 0 900 600">
				<rect width="900" height="600" fill="#de2910"/>
				<g id="petal">
					<path d="m 449.96406,299.9134 c -105.26305,-44.48626 -58.60174,-181.58185 42.06956,-174.6907 -20.36609,10.46694 -23.31775,29.99772 -11.68704,48.09021 13.02444,20.2558 -1.19897,52.84856 -18.80577,60.7674 -28.93485,13.02443 -34.72791,47.74999 -11.57675,65.83309 z" fill="#fff"/>
					<path d="m 444.27188,200.91974 -5.91976,9.29378 -2.14454,-10.8142 -10.67812,-2.75928 9.62461,-5.3895 -0.67104,-10.99955 8.08542,7.48945 10.25578,-4.04271 -4.61053,10.00942 7.00143,8.50541 z" fill="#de2910"/>
					<path d="m 450.56002,298.75902 c -12.73114,-6.53451 -22.9963,-20.15491 -27.46839,-36.43134 -5.11498,-18.66969 -2.17269,-38.74247 8.08308,-55.03768 l -2.20789,-1.39371 c -10.64057,16.92871 -13.69313,37.74293 -8.38575,57.11886 4.72784,17.22201 15.21355,31.09815 28.78703,38.06438 z" fill="#de2910"/>
				</g>
				<use xlink:href="#petal" transform="rotate(72 450,300)"/>
				<use xlink:href="#petal" transform="rotate(144 450,300)"/>
				<use xlink:href="#petal" transform="rotate(216 450,300)"/>
				<use xlink:href="#petal" transform="rotate(288 450,300)"/>
			</svg>
	
			<div id="main" class="py-4">

				<p align="center"> 
					<img src="public/assets/images/mei-circle.png">
					<br/>
					Image Credit:
					<a href="https://www.reddit.com/r/HongKong/comments/dffh96/someone_drew_this_hong_kong_mei_and_asked_me_to/">Source</a>
					<p align="center"><i>"The only thing necessary for the triumph of evil is for good men to do nothing."</i></p>
					<p align="center">- Edmund Burke</p>
				</p>
				
				<p></p>
				
				<h2 id="summary">Summary</h2>
				
				<p>View the website at <a href="/">https://caffeine-overload.github.io/bandinchina/</a>
				This is a comprehensive repository for many, if not all, topics related to Hong Kong.</p>
				<br />
				<p><a name="links"></p>
					
					
					<h2>
						<img src="public/assets/images/mei-circle-16x16.png">
						<a name="go-to">Go To
					</h2>
				
				<p><br />
				</a></p>
				
				<ul>
					<li><a data-link-type="go-to" href="#help-hk">How to help Hong Kong protests from abroad</a>
				
				<ul>
				<li><a data-link-type="go-to" href="#help-hk-general">General</a></li>
				
				<li><a data-link-type="go-to" href="#help-hk-monetary-and-non-monetary-donations">Monetary &amp; Non-monetary Donations</a></li>
				
				<li><a data-link-type="go-to" href="#help-hk-usa">United States of America</a></li>
				
				<li><a data-link-type="go-to" href="#help-hk-uk">United Kingdom</a></li>
				
				<li><a data-link-type="go-to" href="#help-hk-can">Canada</a></li>
				
				<li><a data-link-type="go-to" href="#help-hk-aus">Australia</a></li>
				
				<li><a data-link-type="go-to" href="#help-hk-nz">New Zealand</a></li>
				
				<li><a data-link-type="go-to" href="#help-hk-eu">Europe</a></li>
				
				<li><a data-link-type="go-to" href="#help-hk-cn">China</a></li>
				
				<li><a data-link-type="go-to" href="#help-hk-others">Others</a></li></ul>
				</li>
				
				<li><a data-link-type="go-to" href="#past-achievements">Past Achievements</a></li>
				</ul>

				<a name="lists">
				<div id="lists" class="text-left table-responsive">
					<h2>Loading List...</h2>
					
				</div>
			</div>
	
			<footer class="text-muted display-3">Stand with Hong Kong!</footer>
		</div>
    </div>

    <!-- jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <!-- Bootstrap CDN -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <!-- showdown.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.0/showdown.min.js"></script>

    <!-- Making the table work -->
		<script type="text/javascript">
			const isProd = window.location.href.indexOf("https://caffeine-overload.github.io/bandinchina") > -1;
			const stateManagement = $("#current-page")[0];

			// Changes the links in dev environment for testing purposes
			if(!isProd) {
				const listOfLinks = $("[data-link-type=\"go-to\"]");

				listOfLinks.each(function() {
					const link = $(this);

					link.click(() => {
						if(stateManagement.innerText !== "Home") {
							$.get("./README.md", renderMarkdown());
						}
					})
				})
			}

			// Obtains the README file and renders it
      $.get("./README.md", renderMarkdown());
			
			// Obtains the whitelist document in the public assets and renders it
			$("#whitelist-nav").click(() => {
				$.get("public/assets/lists/whitelist.md", renderMarkdown({newState: "Whitelist"}));
			})

			// Obtains the blacklist document in the public assets and renders it
			$("#blacklist-nav").click(() => {
				$.get("public/assets/lists/blacklist.md", renderMarkdown({newState: "Blacklist"}));
			})

			function renderMarkdown(params = {}) {
				const { newState = "Home" } = params;

				const isList = newState === "Blacklist" || newState === "Whitelist";

				return function (file) {
					stateManagement.innerText = newState;
					// filter the markdown table using a Regular Expression
					// this is meant to allow certain content to show up in the repo but not in the site
					// by setting the flags <!-- RENDER START --> and <!-- RENDER END -->
					const tableRegex = /<!-- RENDER START -->([\S\s]*?)<!-- RENDER END -->/;
					const match = file.match(tableRegex);
					const tableMD = (match.length > 1) ? match[1] : "Table wasn't loaded properly ðŸ˜¬";
	
					// render the markdown into HTML
					const render = (new showdown.Converter({ tables: true })).makeHtml(tableMD);
	
					// replace the main content with the rendered .md
					$(" #lists ").html(render);
					$(" #lists table ").addClass("table table-hover");
					
					// Allows testing of the blacklist and whitelist buttons in dev environment
					if(isProd && isList) {
						location.href = "https://caffeine-overload.github.io/bandinchina#lists";
					} else if(!isProd && isList){
						location.href = `${location.origin}${location.pathname}#lists`;
					}
				}
			}


    </script>

  </body>
</html>

